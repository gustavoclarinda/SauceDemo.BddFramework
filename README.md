# SauceDemo BDD Automation Framework

This repository contains a BDD automation framework for the [SauceDemo](https://www.saucedemo.com/) application, built in **C#/.NET 8**, using **SpecFlow (Cucumber for .NET)**, **NUnit**, and **Selenium WebDriver**.

The goal is to provide a professional, interview-ready example of a QA Automation framework that:

- Uses **Gherkin BDD** for business-readable scenarios
- Implements **Page Object Model (POM)**
- Runs locally and in **GitHub Actions CI**
- Generates **test result reports** (TRX artifacts in the pipeline)

---

## Quickstart

A short, step-by-step guide to get the project running locally.

1. Clone the repository:

   ```bash
   git clone https://github.com/gustavoclarinda/SauceDemo.BddFramework.git
   cd SauceDemo.BddFramework
   ```

2. Restore dependencies and build:

   ```bash
   dotnet restore
   dotnet build --configuration Release
   ```

3. Run tests (see "Running tests" section below for category filters and report options).

---

## Prerequisites

- .NET 8 SDK
- Chrome browser (for UI tests)
- ChromeDriver compatible with your Chrome version (if not using a driver manager)
- Optional: GitHub CLI or access to GitHub Actions for CI runs

---

## Running tests

Use the category-filter commands below for reproducible test runs.

**API Testing with report:**

```bash
dotnet test --filter "TestCategory=api" --logger "trx;LogFileName=TestResults_api.trx"
```

**UI Testing with report:**

```bash
dotnet test --filter "TestCategory=ui" --logger "trx;LogFileName=TestResults_ui.trx"
```

Additional notes:

- To run all tests: `dotnet test`.
- Use `--verbosity normal` for more test output if troubleshooting.
- Test result TRX files are produced in the test runner output folder and can be consumed by CI and reporting tools.

### Generate a local LivingDoc HTML report

1. Restore the LivingDoc CLI tool (local manifest in `.config/dotnet-tools.json`):

   ```bash
   dotnet tool restore
   ```

2. Run the generation script to execute tests and convert `TestExecution.json` into an HTML report:

   ```bash
   ./generate-livingdoc-report.sh
   ```

   - By default, artifacts are written to `TestReports/` (`TestReports/TestResults` for TRX and `TestReports/LivingDoc.html` for the report).
   - Use `-c Release` to change the build configuration or `-o <folder>` to choose a different output directory.
   - The script runs `dotnet test` with the `SpecFlow.Plus.LivingDocPlugin` already configured in the `csproj` and will fail if `TestExecution.json` is not produced.

### Run tests and generate LivingDoc via Visual Studio

If you prefer to run tests in **Visual Studio** and generate the same LivingDoc HTML report, follow these steps:

1. **Run the tests in Test Explorer**
   - Open the `SauceDemo.BddFramework.sln` solution in Visual Studio.
   - Navigate to **Test > Test Explorer** and click **Run All** (or filter by category using Test Explorer settings).
   - Ensure Visual Studio's Test Results settings point to a known directory (for example, `TestReports/TestResults`). To change it, go to **Tools > Options > Test > General** and adjust the output path.

2. **Locate the `TestExecution.json` generated by SpecFlow**
   - After the run, Visual Studio will write TRX files and the `TestExecution.json` produced by the `SpecFlow.Plus.LivingDocPlugin` inside the results directory (by default under `TestResults` in the solution folder unless you configured a custom path).

3. **Generate the LivingDoc report from the Visual Studio result**
   - In a terminal inside the solution, restore the local tool and generate the HTML using the `TestExecution.json` created by Visual Studio:

     ```bash
     dotnet tool restore
     livingdoc test-assembly SauceDemo.BddFramework/bin/Debug/net8.0/SauceDemo.BddFramework.dll \
       -t "<PATH_TO>/TestExecution.json" \
       -o TestReports/LivingDoc.html
     ```

   - Adjust the DLL and `TestExecution.json` paths if you used a different build configuration (for example, `Release`).
   - Alternatively, you can reuse the `./generate-livingdoc-report.sh` script, pointing the `-o` parameter to the same results directory configured in Visual Studio so it can automatically find `TestExecution.json`.

### Generate an HTML report in GitHub Actions

The `CI - SauceDemo BDD Automation` workflow already produces the LivingDoc report on every run for the `master` branch (push or pull request):

1. Tests run in **Release** and produce TRX files and `TestExecution.json` in `TestReports/TestResults`.
2. The LivingDoc local tool is restored (`dotnet tool restore`) and used to create `TestReports/LivingDoc/LivingDoc.html` from the built DLL and `TestExecution.json`.
3. Artifacts are published in the workflow run:
   - `test-results-trx`: TRX test result files.
   - `livingdoc-report`: folder with `LivingDoc.html` and assets.
4. When the artifacts exist, they are also uploaded to **GitHub Pages** (environment `github-pages`), allowing you to view the HTML via the `page_url` shown in the job logs.

To download the report for a specific run, open the workflow run in GitHub, go to **Artifacts**, and download `livingdoc-report` (it contains the ready-to-open HTML).

---

## Tech Stack

- **Language:** C# (.NET 8)
- **Test Runner:** NUnit
- **BDD Framework:** SpecFlow (Gherkin)
- **UI Automation:** Selenium WebDriver (Chrome)
- **CI/CD:** GitHub Actions

---

## Project Structure

```
SauceDemo.BddFramework/
  Features/
    SauceDemo.feature          # BDD scenarios (Gherkin)
  Steps/
    SauceDemoSteps.cs          # Step definitions
  Pages/
    BasePage.cs
    LoginPage.cs
    InventoryPage.cs
    CartPage.cs
    CheckoutInformationPage.cs
    CheckoutOverviewPage.cs
    CheckoutCompletePage.cs
  Hooks/
    TestHooks.cs               # WebDriver setup/teardown per scenario
  Drivers/
    WebDriverFactory.cs        # Centralized WebDriver configuration
  specflow.json                # SpecFlow configuration
  SauceDemo.BddFramework.csproj
```

---

## Troubleshooting

- If ChromeDriver version mismatches, update the driver or Chrome to matching versions.
- If tests hang, run with `--logger "trx;LogFileName=debug.trx" --verbosity d` and inspect the TRX.
- Ensure any environment variables used by tests (if any) are set before running.

---

## What changed

This version of the README restructures the document with Quickstart, Prerequisites, Running tests, LivingDoc reporting, and Troubleshooting sections to improve clarity while preserving the original test commands and project structure references.
